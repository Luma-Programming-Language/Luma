@module "main"

@use "vector" as vec
@use "io" as io

pub const main -> fn () int {
    let v: Vector = create_vector(sizeof<int>);
    defer { vec::free_vector(&v); } 
    
    let x: int = 42;
    v.push_back(cast<*void>(&x));
    
    let elem_ptr: *int = cast<*int>(v.get(0));
    if (elem_ptr != cast<*int>(0)) {
        io::print("First element in vector: %d\n", [io::int_arg(*elem_ptr)]);
    } else {
        io::print_err("Failed to retrieve element from vector\n", [0]);
    }

    io::print("Vector size after one push_back: %d\n", [io::int_arg(v.size)]);
    return 0;
}
